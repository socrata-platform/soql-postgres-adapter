#################################
# PG secondary backend for test #
#################################

common-db {
  #c3p0 {
  #  maxPoolSize = 20
  #  idleConnectionTestPeriod = 60
  #  testConnectionOnCheckin = true
  #  preferredTestQuery = "SELECT 1"
  #  maxIdleTimeExcessConnections = 300
  #}
}

pg-database ${common-db} {
  db-type: "postgres"
  host = localhost
  port = 5432
  username = "blist"
  password = "blist"
}

redshift-database ${common-db} {
  db-type: "redshift"
  host = redshiftinstance-w3zj1oftuifi.ck5lkhdheomu.us-west-2.redshift.amazonaws.com
  port = 5439
}

com.socrata.pg.store.secondary {
  database: ${redshift-database} {
    database: "secondary_store_test"
    app-name: "pg secondary store test"
  }
  log4j = ${common-log4j} {
    logger.com.socrata = INFO
  }
}

com.socrata.pg.query.secondary {
  database: ${redshift-database} {
    database: "secondary_query_test"
    app-name: "pg secondary store test"
  }
  log4j = ${common-log4j} {
    logger.com.socrata = INFO
  }
}

com.socrata.pg.store.truth {
  database: ${pg-database} {
    database: "truth_store_test"
    app-name: "pg secondary truth store test"
  }
  log4j = ${common-log4j}
}

com.socrata.pg.query.truth {
  database: ${pg-database} {
    database: "truth_query_test"
    app-name: "pg secondary truth query test"
  }
  log4j = ${common-log4j}
}

include "local.conf"
